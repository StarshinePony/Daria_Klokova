(function(x,V){"use strict";function le(e,t){if(e==null)return{};var n={},o=Object.keys(e),d,c;for(c=0;c<o.length;c++)d=o[c],!(t.indexOf(d)>=0)&&(n[d]=e[d]);return n}function se(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e}function ue(e){return function(t,n,o){for(var d=-1,c=Object(t),r=o(t),s=r.length;s--;){var f=r[e?s:++d];if(n(c[f],f,c)===!1)break}return t}}var de=ue(),fe=de;function pe(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var me=typeof global=="object"&&global&&global.Object===Object&&global,z=me,ge=typeof self=="object"&&self&&self.Object===Object&&self,he=z||ge||Function("return this")(),I=he,ve=I.Symbol,J=ve,K=Object.prototype,be=K.hasOwnProperty,we=K.toString,B=J?J.toStringTag:void 0;function ye(e){var t=be.call(e,B),n=e[B];try{e[B]=void 0;var o=!0}catch(c){}var d=we.call(e);return o&&(t?e[B]=n:delete e[B]),d}var xe=Object.prototype,je=xe.toString;function Te(e){return je.call(e)}var Se="[object Null]",ke="[object Undefined]",G=J?J.toStringTag:void 0;function L(e){return e==null?e===void 0?ke:Se:G&&G in Object(e)?ye(e):Te(e)}function N(e){return e!=null&&typeof e=="object"}var Ae="[object Arguments]";function D(e){return N(e)&&L(e)==Ae}var H=Object.prototype,Ee=H.hasOwnProperty,Fe=H.propertyIsEnumerable,Oe=D(function(){return arguments}())?D:function(e){return N(e)&&Ee.call(e,"callee")&&!Fe.call(e,"callee")},Ce=Oe,Pe=Array.isArray,X=Pe;function $e(){return!1}var Q=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Y=Q&&typeof module=="object"&&module&&!module.nodeType&&module,_e=Y&&Y.exports===Q,Z=_e?I.Buffer:void 0,Be=Z?Z.isBuffer:void 0,Me=Be||$e,Ue=Me,Re=9007199254740991,Ve=/^(?:0|[1-9]\d*)$/;function Je(e,t){var n=typeof e;return t=t==null?Re:t,!!t&&(n=="number"||n!="symbol"&&Ve.test(e))&&e>-1&&e%1==0&&e<t}var qe=9007199254740991;function ee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qe}var Le="[object Arguments]",Ne="[object Array]",We="[object Boolean]",ze="[object Date]",Ie="[object Error]",Ke="[object Function]",Ge="[object Map]",De="[object Number]",He="[object Object]",Xe="[object RegExp]",Qe="[object Set]",Ye="[object String]",Ze="[object WeakMap]",et="[object ArrayBuffer]",tt="[object DataView]",nt="[object Float32Array]",rt="[object Float64Array]",it="[object Int8Array]",ot="[object Int16Array]",at="[object Int32Array]",ct="[object Uint8Array]",lt="[object Uint8ClampedArray]",st="[object Uint16Array]",ut="[object Uint32Array]",w={};w[nt]=w[rt]=w[it]=w[ot]=w[at]=w[ct]=w[lt]=w[st]=w[ut]=!0,w[Le]=w[Ne]=w[et]=w[We]=w[tt]=w[ze]=w[Ie]=w[Ke]=w[Ge]=w[De]=w[He]=w[Xe]=w[Qe]=w[Ye]=w[Ze]=!1;function dt(e){return N(e)&&ee(e.length)&&!!w[L(e)]}function ft(e){return function(t){return e(t)}}var te=typeof exports=="object"&&exports&&!exports.nodeType&&exports,M=te&&typeof module=="object"&&module&&!module.nodeType&&module,pt=M&&M.exports===te,W=pt&&z.process,mt=function(){try{var e=M&&M.require&&M.require("util").types;return e||W&&W.binding&&W.binding("util")}catch(t){}}(),ne=mt,re=ne&&ne.isTypedArray,gt=re?ft(re):dt,ht=gt,vt=Object.prototype,bt=vt.hasOwnProperty;function wt(e,t){var n=X(e),o=!n&&Ce(e),d=!n&&!o&&Ue(e),c=!n&&!o&&!d&&ht(e),r=n||o||d||c,s=r?pe(e.length,String):[],f=s.length;for(var b in e)(t||bt.call(e,b))&&!(r&&(b=="length"||d&&(b=="offset"||b=="parent")||c&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||Je(b,f)))&&s.push(b);return s}var yt=Object.prototype;function xt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||yt;return e===n}function jt(e,t){return function(n){return e(t(n))}}var Tt=jt(Object.keys,Object),St=Tt,kt=Object.prototype,At=kt.hasOwnProperty;function Et(e){if(!xt(e))return St(e);var t=[];for(var n in Object(e))At.call(e,n)&&n!="constructor"&&t.push(n);return t}function Ft(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ot="[object AsyncFunction]",Ct="[object Function]",Pt="[object GeneratorFunction]",$t="[object Proxy]";function _t(e){if(!Ft(e))return!1;var t=L(e);return t==Ct||t==Pt||t==Ot||t==$t}function ie(e){return e!=null&&ee(e.length)&&!_t(e)}function Bt(e){return ie(e)?wt(e):Et(e)}function Mt(e,t){return e&&fe(e,t,Bt)}function Ut(e,t){return function(n,o){if(n==null)return n;if(!ie(n))return e(n,o);for(var d=n.length,c=t?d:-1,r=Object(n);(t?c--:++c<d)&&o(r[c],c,r)!==!1;);return n}}var Rt=Ut(Mt),Vt=Rt;function Jt(e){return e}function qt(e){return typeof e=="function"?e:Jt}function Lt(e,t){var n=X(e)?se:Vt;return n(e,qt(t))}var Nt=["name"];function Wt(e){var t=window,n=t.Joomla;e.module("Fields").directive("fieldWysiwygeditor",["$timeout","mediaPicker",zt]),window.jModalClose=function(){window.tinyMCE.activeEditor.windowManager.close()},window.jInsertEditorText=function(o,d){n.editors.instances[d].replaceSelection(o)},window.SqueezeBox=window.SqueezeBox||{close:window.jModalClose}}var zt=function(t){return{restrict:"EA",require:"?ngModel",template:'<div><textarea class="uk-textarea" name="{{id}}" id="{{id}}"></textarea></div>',link:function(o,d,c,r){var s=window.widgetkit.config,f=It(s.editor),b=function(){f.create({width:"100%",height:350,resize:!0,menubar:!1,valid_elements:"*[*]",setup:function(m){Kt(m,r),Gt(m,r,s.editor),Dt(m,s.editor),m.on("init",function(){Lt(m.schema.elements,function(v){return v.attributePatterns=(v.attributePatterns||[]).concat([{pattern:/^uk-.*$/}])}),m.setContent(r.$viewValue||"")})}}),r.$render=function(){try{f.instance.setContent(r.$viewValue||""),x("#"+f.id).val(r.$viewValue||"")}catch(p){}},r.$render()};o.id=f.id,o.$on("$destroy",function(){return f.destroy()}),t(function(){return setTimeout(b)})}}};function It(e){e===void 0&&(e={});var t=window,n=t.Joomla,o=t.tinyMCE;return{id:"mce_"+Xt(),instance:null,create:function(c){var r=this;c===void 0&&(c={}),this.instance=new o.Editor(this.id,x.extend({},e.settings,c),o.EditorManager),this.instance.render(),n.editors.instances[this.id]={getValue:function(){return r.instance.getContent()},setValue:function(f){return r.instance.setContent(f)},getSelection:function(){return r.instance.selection.getContent()},replaceSelection:function(f){return r.instance.execCommand("mceInsertContent",!1,f)}}},destroy:function(){this.instance.destroy(),this.instance=null,delete n.editors.instances[this.id]}}}function Kt(e,t){var n=["change","input"];n.forEach(function(o){return e.on(o,function(){return t.$setViewValue(e.getContent())})})}function Gt(e,t,n){var o=n.title,d=n.iframe;e.addButton("editor",{icon:"fullscreen",tooltip:o,onclick:function(){var r=window,s=r.innerWidth,f=r.innerHeight,b=e.windowManager.open({title:o,html:'<iframe src="'+d+`" onload="tinyMCE.activeEditor.fire('JEditor', this)"></iframe>`,width:s*.9,height:f*.9-100,buttons:[{text:"Ok",subtype:"primary",onclick:function(){return b.fire("update")}},{text:"Cancel",onclick:"close"}]});e.once("JEditor",function(T){var p=T.contentWindow.Joomla,m=T.contentDocument,v=e.getContent(),k=m.getElementById("content");k&&(k.value=v),p.editors.instances.content&&p.editors.instances.content.setValue(v),b.on("update",function(){e.setContent(p.editors.instances.content.getValue()),t.$setViewValue(e.getContent()),b.close()})})}}),e.settings.toolbar1+=" editor"}function Dt(e,t){var n=t.id,o=t.buttons,d=x.map(o,function(c){var r=c.text,s=c.link,f=c.options,b=f===void 0?{}:f;return{text:r,name:"insert_"+r.toLowerCase(),context:"insert",onclick:function(){var p=window,m=p.Joomla,v=p.innerWidth,k=p.innerHeight,O=e.windowManager.open(Ht({title:r,html:'<iframe src="'+s.replace(n,e.id)+'"></iframe>',width:v*.8,height:k*.8-100,buttons:[{text:"Close",onclick:"close"}]},function(C){var A=C.buttons,S=b.confirmCallback,P=b.confirmText;S&&A.unshift({text:P,subtype:"primary",onclick:function(y){var i=y.target,a=document.getElementById(O._id),u="return "+S.replace(n,e.id);a.classList.add("modal-content"),Promise.resolve(new Function(u).call(i)).then(function(){return O.close()})}})}));m.current=O.on("close",function(){return m.current=null}),m.current.querySelector=function(){return null}}}});d.forEach(function(c){var r=c.name,s=le(c,Nt);return e.addMenuItem(r,s)}),e.settings.insert_button_items+=" |  "+d.map(function(c){var r=c.name;return r}).join(" ")}function Ht(e,t){return t(e),e}function Xt(){return Math.random().toString(36).substr(2,8)}function Qt(e){e.module("widgetkit").service("mediaPicker",["$templateCache","$compile","$q","$rootScope","$rootElement","filterFilter","UIkit","mediaRequest","Application",function(t,n,o,d,c,r,s,f,b){var T,p,m,v,k,O,C=!1,A={init:function(i){return i&&i.allowedFiletypes&&(C=i.allowedFiletypes),this.options=e.extend({multiple:!1},i),k=o.defer(),p=x(t.get("media")),m=p.data("media-path"),v=n(p)(d).scope(),v.vm=this,v.selectItem=function(a,u){if(u.shiftKey&&O){Yt();for(var l=x(u.target).closest("li"),j=l.parent().children(),F=l.index()>O.index()?1:-1,h=F===1?O.index():l.index(),E=F===1?l.index():O.index(),$,_=h;_<=E;_++)$=j.eq(_).scope(),$[$.folder?"folder":"file"].selected=!0}else a.selected=!a.selected;O=x(u.target).closest("li")},this.open("").then(function(){A.modal=s.modal(x('<div class="uk-modal uk-modal-container">').append(p),{container:c[0],stack:!0}),A.modal.show(),A.close=function(){A.modal.hide()},A.initUpload()}),k.promise},initUpload:function(){var i=x("progress",p)[0],a={name:"Filedata[]",multiple:!0,params:{"Content-Type":"multipart/form-data"},allow:"*.(jpeg|jpg|gif|apng|png|svg|webp|avif|mp3|ogg|wav|mp4|wmv|ogv|webm)",beforeAll:function(l){l.url=f.url({path:S(T,m)},!0),l.beforeSend=function(j){var F=j.data.get("Filedata[]");return Zt(F).then(function(h){var E;return e.extend(j,{headers:{"Content-Type":"application/json"},responseType:"json",data:JSON.stringify((E={override:!0,name:F.name},E[b.config.token]="1",E.content=h.slice(h.indexOf("base64")+7),E))})})}},loadStart:function(l){i.max=l.total,i.value=l.loaded,i.hidden=!1},progress:function(l){i.max=l.total,i.value=l.loaded},loadEnd:function(l){i.max=l.total,i.value=l.loaded},error:function(l){s.notification({message:l.message,status:"danger",container:c}),i.hidden=!0},fail:function(l){s.notification({message:l,status:"danger",container:c})},completeAll:function(){A.open(T).then(function(){i.hidden=!0})}};s.upload(p,a)},open:function(i){return g(i).then(function(a){O=null,v.media=[],v.breadcrumbs=[],a.forEach(function(l){v.media.push(l)}),T=i;var u=(T?"/"+T:"").split("/");do v.breadcrumbs.unshift({path:u.join("/").substr(1),title:u.pop()});while(u.length);v.breadcrumbs[0].title="home"})},select:function(){var i=this.options,a=A.getSelected(),u=[],l=[],j=function(E){return E.replace(/[_-]/g," ").replace(/\.[^.]+$/,"").replace(/\w\S*/g,function($){return $.charAt(0).toUpperCase()+$.substr(1)})};if(a.forEach(function(h){!h.media&&(!C||h.path.match(C))?u.push(h):(h.title=j(h.title),l.push(h))}),u.length){var F=[];u.forEach(function(h){F.push(g(h.path,!0).then(function(E){E.forEach(function($){l.push($)})}))}),Promise.all(F).then(function(){k.resolve(i.multiple||!l.length?l:l[0]),A.close()})}else k.resolve(this.options.multiple||!l.length?l:l[0]),A.close()},addFolder:function(){var i=prompt("Folder Name");i&&f.post({path:S(T,m)},{name:i}).then(function(){A.open(T)})},remove:function(){if(window.confirm("Are you sure?")){var i=A.getSelected().map(function(a){return a.path});Promise.all(i.map(function(a){return f.delete({path:S(a,m)})})).then(function(){A.open(T)})}},getSelected:function(){return r(v.media,{selected:!0})}};function S(y,i){return"local-"+i+":/"+(y||"").replace(/^\/+/g,"")}var P=/\.(jpe?g|a?png|gif|webp|avif|svg|mp3|ogg|wav|mp4|wmv|ogv|webm)$/i;function g(y,i){return f.get({path:S(y,m)}).then(function(a){return a.data.data.map(function(u){var l=(y?y+"/":"")+u.name;if(!(i&&!l.match(P)))return{title:u.name,path:l,url:(m?m+"/":"")+l,href:b.baseUrl()+"/"+(m?m+"/":"")+l,type:u.type==="dir"?"folder":"file",media:!!l.match(P),width:u.width,height:u.height,size:u.size}}).filter(function(u){return u})})}return{select:function(i){return A.init(i)}}}]).service("mediaRequest",["$q","$http","Application",function(t,n,o){var d="index.php?option=com_media&task=api.files&format=json";function c(r){return function(s,f){return f=f||{},f[o.config.token]=1,n({url:this.url(s),method:r,noMethodOverride:!0,data:JSON.stringify(f)})}}return{get:function(s){return n.get(this.url(s))},delete:c("DELETE"),post:c("POST"),put:c("PUT"),url:function(s,f){return f&&(s[o.config.token]=1),d+(s?"&"+x.param(s):"")}}}])}function Yt(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function Zt(e){return new Promise(function(t){var n=new FileReader;n.onload=function(o){return t(o.target.result)},n.readAsDataURL(e)})}function en(e){e.module("widgetkit").service("mediaPicker",["$templateCache","$compile","$q","$rootScope","$rootElement","filterFilter","UIkit","mediaRequest","Application",function(t,n,o,d,c,r,s,f,b){var T=/\.(jpe?g|a?png|gif|webp|avif|svg|mp3|ogg|wav|mp4|wmv|ogv|webm)$/i,p,m,v,k,O,C,A=!1,S={init:function(g){return g&&g.allowedFiletypes&&(A=g.allowedFiletypes),this.options=e.extend({multiple:!1},g),O=o.defer(),m=x(t.get("media")),v=m.data("media-path"),k=n(m)(d).scope(),k.vm=this,k.selectItem=function(y,i){if(i.shiftKey&&C){tn();for(var a=x(i.target).closest("li"),u=a.parent().children(),l=a.index()>C.index()?1:-1,j=l===1?C.index():a.index(),F=l===1?a.index():C.index(),h,E=j;E<=F;E++)h=u.eq(E).scope(),h[h.folder?"folder":"file"].selected=!0}else y.selected=!y.selected;C=x(i.target).closest("li")},this.open("").then(function(){S.modal=s.modal(x('<div class="uk-modal uk-modal-container">').append(m),{container:c[0],stack:!0}),S.modal.show(),S.close=function(){S.modal.hide()},S.initUpload()}),O.promise},initUpload:function(){var g=x("progress",m)[0],y={name:"Filedata[]",multiple:!0,params:{"Content-Type":"multipart/form-data"},allow:"*.(jpeg|jpg|gif|apng|png|svg|webp|avif|mp3|ogg|wav|mp4|wmv|ogv|webm)",beforeAll:function(a){a.url=f.url({task:"file.upload",tmpl:"component",format:"html",folder:p},!0)},loadStart:function(a){g.max=a.total,g.value=a.loaded,g.hidden=!1},progress:function(a){g.max=a.total,g.value=a.loaded},loadEnd:function(a){g.max=a.total,g.value=a.loaded},error:function(a){s.notification({message:a.message,status:"danger",container:c}),g.hidden=!0},fail:function(a){s.notification({message:a,status:"danger",container:c})},completeAll:function(){S.open(p).then(function(){g.hidden=!0})}};s.upload(m,y)},open:function(g){return f.get({view:"mediaList",tmpl:"component",folder:g,layout:"details"}).then(function(y){C=null,k.media=[],k.breadcrumbs=[];var i=x(y.data).find("tbody tr");i.first().find(".description").text().trim()===".."&&(i=i.not(i[0])),i.each(function(){var u=x(this),l=u.find("td:first a").length?u.find("td:first a"):u.find("td:nth-child(2) a"),j=u.find("td :checkbox").val(),F=u.find("td.dimensions").text().trim().split(" x "),h=(g?g+"/":"")+j;k.media.push({title:j,path:h,url:(v?v+"/":"")+h,href:b.baseUrl()+"/"+(v?v+"/":"")+h,type:l.is("[target]")?"folder":"file",media:!!h.match(T),width:F[0],height:F[1],size:u.find("td.filesize").text().trim()})}),p=g;var a=(p?"/"+p:"").split("/");do k.breadcrumbs.unshift({path:a.join("/").substr(1),title:a.pop()});while(a.length);k.breadcrumbs[0].title="home"})},select:function(){var g=this.options,y=S.getSelected(),i=[],a=[],u=function(F){return F.replace(/[_-]/g," ").replace(/\.[^.]+$/,"").replace(/\w\S*/g,function(h){return h.charAt(0).toUpperCase()+h.substr(1)})};if(y.forEach(function(j){!j.media&&(!A||j.path.match(A))?i.push(j):(j.title=u(j.title),a.push(j))}),i.length){var l=[];i.forEach(function(j){l.push(f.get({view:"mediaList",tmpl:"component",folder:j.title,layout:"details"}).then(function(F){var h=x(F.data).find("tbody tr");h.first().find(".description").text().trim()===".."&&(h=h.not(h[0])),h.each(function(){var E=x(this),$=E.find("td:first a"),_=E.find("td :checkbox").val(),ce=E.find("td.dimensions").text().trim().split(" x "),R=(j.title?j.title+"/":"")+_;if(R.match(T)){var dn={title:u(_),path:R,url:(v?v+"/":"")+R,href:b.baseUrl()+"/"+(v?v+"/":"")+R,type:$.is("[target]")?"folder":"file",media:!!R.match(T),width:ce[0],height:ce[1],size:E.find("td.filesize").text().trim()};a.push(dn)}})}))}),Promise.all(l).then(function(){O.resolve(g.multiple||!a.length?a:a[0]),S.close()})}else O.resolve(this.options.multiple||!a.length?a:a[0]),S.close()},addFolder:function(){var g=prompt("Folder Name");g&&f.post({task:"folder.create",foldername:g,folderbase:p}).then(function(){S.open(p)})},remove:function(){window.confirm("Are you sure?")&&f.post({task:"folder.delete",folder:p,rm:S.getSelected().map(function(g){return g.title})}).then(function(){S.open(p)})},getSelected:function(){return r(k.media,{selected:!0})}};return{select:function(g){return S.init(g)}}}]).service("mediaRequest",["$q","$http","Application",function(t,n,o){var d="index.php?option=com_media";return{get:function(r){return n.get(this.url(r))},post:function(r){return r[o.config.token]=1,n.post(d,x.param(r),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},url:function(r,s){return s&&(r[o.config.token]=1),d+"&"+x.param(r)}}}])}function tn(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}var nn=window,rn=nn.widgetkit.config;if(V.module("widgetkit").run(["$rootScope","$rootElement","$timeout","$filter",un]),Wt(V),rn.platform.version.startsWith("3.")){var on=window,an=on.MooTools;if(en(V),an){var cn=Element.prototype.hide;Element.prototype.hide=function(){return x(this).is('[class*="uk-"]')?this:cn.apply(this,[])}}}else{var oe,ln=x('link[href*="atum/css/template"]'),U=ln[0];if(Qt(V),U!=null&&(oe=U.sheet)!=null&&oe.cssRules)for(var q=0;q<U.sheet.cssRules.length;q++){var ae,sn=U.sheet.cssRules[q];(ae=sn.selectorText)!=null&&ae.startsWith(".container-main .mce")&&U.sheet.deleteRule(q)}}function un(e,t,n,o){window.parent.document.updateUploader=window.parent.document.updateUploader||function(){};var d=x("body.com_widgetkit"),c=d.find(".header .container-title").append('<h1 class="page-title"><span class="icon-widgetkit"></span>Widgetkit: <span></span></h1>').find(".page-title span").eq(1),r=d.find("#toolbar");r.length||(r=d.find("#subhead-container > div > div").append('<nav aria-label="Toolbar"><div class="btn-toolbar d-flex" role="toolbar" id="toolbar"></div></nav>').find("#toolbar"));var s='<div class="btn-wrapper btn-group" id="toolbar-create"><button class="btn btn-small btn-success"><span class="icon-new icon-white"></span></span> '+o("trans")("New")+"</button></div>",f='<div class="btn-wrapper btn-group" id="toolbar-apply"><button class="btn btn-small btn-success"><span class="icon-apply icon-white"></span> '+o("trans")("Save")+'</button></div>       <div class="btn-wrapper btn-group" id="toolbar-save"><button class="btn btn-small"><span class="icon-save"></span> '+o("trans")("Save & Close")+'</button></div>       <div class="btn-wrapper btn-group" id="toolbar-cancel"><button class="btn btn-small"><span class="icon-cancel"></span> '+o("trans")("Close")+"</button></div>",b='<div class="btn-wrapper btn-group ms-auto" id="toolbar-options"><button class="btn btn-small"><span class="icon-options"></span> '+o("trans")("Options")+"</button></div>";r.on("click","#toolbar-create button",function(){t.scope().vm.createContent()}).on("click","#toolbar-apply",function(){t.scope().vm.saveContent()}).on("click","#toolbar-save",function(){var p=t.scope();p.vm.saveContent().$promise.then(function(){p.vm.setView("content")})}).on("click","#toolbar-cancel",function(){var p=t.scope();p.vm.setView("content"),p.$apply()}).on("click","#toolbar-options",function(){location.href="index.php?option=com_config&view=component&component=com_widgetkit"}),d.on("keyup",'[ng-model="content.name"]',T),e.$on("wk.change.view",function(p,m){n(function(){c.text(t.find("h2.js-header").text()),r.empty().html(m==="content"?s:m==="contentEdit"?f:"").append(b),T()})});function T(){r.find("#toolbar-apply button, #toolbar-save button").prop("disabled",t.find("form.ng-invalid").length)}}})(jQuery,angular);
