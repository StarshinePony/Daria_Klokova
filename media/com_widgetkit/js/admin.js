(function(b,w){"use strict";function M(){var i=function(a,l){l=l||a,l.widgets=[],a.data&&a.data.widgets&&(a.search=t["widgetkit.widgets.filter"]?JSON.parse(t["widgetkit.widgets.filter"]):{name:"",data:{_widget:{name:""}}},a.$watch("search",function(){t["widgetkit.widgets.filter"]=JSON.stringify(angular.copy(a.search))},!0),l.widgets.push({name:"",label:Translator?Translator.trans("All"):"All"}),Object.keys(a.data.widgets).sort().forEach(function(d){l.widgets.push(a.data.widgets[d])}))},r=function(a,l,d,f,m){var s=this,u=window.localStorage||{};s.viewmode=u["wk.content.viewmode"]||"list",s.include="",i(a,s),s.previewContent=function(o){return a.$emit("wk.preview.content",o).preview||a.data.types[o.type].icon},s.createContent=function(o){a.content=o||{name:"",type:null,data:{_widget:{}}},a.widget=null,s.setView("contentConfig")},s.editContent=function(o,g){var k=null,x=a.data.widgets;o=angular.copy(o);var c=o.data._widget;if(o.id||(angular.extend(o.data,a.data.types[o.type].data),o.id="new"),x[c.name])k=angular.copy(x[c.name]),k.data=c.data=angular.extend({},k.settings,c.data);else{s.createContent(o);return}a.content=o,a.widget=k,s.setView("contentEdit",g)},s.saveContent=function(){return a.content.id==="new"&&delete a.content.id,f.save({id:a.content.id},{content:a.content},function(o){s.editContent(a.data.content[o.id]=o),d.notification({message:o.name+" saved.",status:"success",container:m})})},s.copyContent=function(o){return o=angular.copy(o),o.id="",o.name+=" (copy)",f.save({id:o.id},{content:o},function(g){a.data.content[g.id]=g,g.data._widget=angular.isArray(g.data._widget)?{}:g.data._widget,d.notification({message:g.name+" copied.",status:"success",container:m})})},s.deleteContent=function(o){confirm("Are you sure?")&&f.delete({id:o.id},function(){delete a.data.content[o.id]})},s.getWidget=function(o){return a.data.widgets[o.data._widget.name]},s.selectWidget=function(o){var g=a.content.data;g._widget.name!==o.name&&(g._widget.name=o.name,g._widget.data={})},s.setView=function(o,g){s.view=o,g&&(s.include=g),a.$emit("wk.change.view",o)},s.setViewMode=function(o){s.viewmode=u["wk.content.viewmode"]=o},s.setView("content")};angular.module("widgetkit").controller("contentCtrl",["$scope","$rootElement","Application","UIkit","Content",function(e,a,l,d,f){var m=this;e.loaded=!1,e.data=angular.extend({content:f.query(function(s){angular.forEach(s,function(u,o){o[0]!=="$"&&(u.data=angular.extend({_widget:{}},u.data),u.data._widget=angular.isArray(u.data._widget)?{}:u.data._widget)}),e.loaded=!0})},l.config),m.name="contentCtrl",r.call(this,e,l,d,f,a)}]).controller("pickerCtrl",["$scope","$rootElement","Application","UIkit","Content",function(e,a,l,d,f){var m=this;e.loaded=!1,e.data=angular.extend({content:f.query(function(s){angular.forEach(s,function(u,o){o[0]!=="$"&&(u.data=angular.extend({_widget:{}},u.data),u.data._widget=angular.isArray(u.data._widget)?{}:u.data._widget)}),e.loaded=!0})},l.config),m.name="pickerCtrl",m.update=function(s){var u,o;(u=window.parent)==null||u.postMessage({message:"selectWidget",widget:{id:s.id,name:s.name}}),(o=window.parent)==null||o.selectWidget==null||o.selectWidget({id:s.id,name:s.name})},r.call(this,e,l,d,f,a)}]);var t;try{var n="__test__";t=window.sessionStorage||{},t[n]=1,delete t[n]}catch(e){t={}}}function z(){w.module("widgetkit").directive("mediaPreview",["mediaInfo",function(i){function r(t){var n=this;n.type=function(){return t.media=i(t.src),t.media.type},n.cleanUrl=function(e){return typeof e=="string"&&(e=e.replace("autoplay=1","autoplay=0")),e}}return{restrict:"E",scope:{src:"@"},controller:["$scope",r],controllerAs:"vm",template:`<div ng-switch="vm.type()">
                           <audio ng-switch-when="audio" ng-src="{{ media.src }}" controls="true"></audio>
                           <video ng-switch-when="video" ng-src="{{ media.src }}" controls="true"></video>
                           <iframe ng-switch-when="iframe" ng-src="{{ vm.cleanUrl(media.src) }}" frameborder="0" width="1920" height="1080" allowfullscreen uk-responsive></iframe>
                           <img ng-switch-default ng-src="{{ media.src }}">
                       </div>`}}]).directive("autofocus",["$timeout",function(i){return{restrict:"A",link:function(t,n){i(function(){n[0].focus()})}}}])}function I(){return I=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},I.apply(this,arguments)}function C(i){var r=typeof i;return i!=null&&(r=="object"||r=="function")}var B=typeof global=="object"&&global&&global.Object===Object&&global,N=B,G=typeof self=="object"&&self&&self.Object===Object&&self,D=N||G||Function("return this")(),W=D,H=function(){return W.Date.now()},A=H,J=/\s/;function X(i){for(var r=i.length;r--&&J.test(i.charAt(r)););return r}var K=/^\s+/;function Q(i){return i&&i.slice(0,X(i)+1).replace(K,"")}var Y=W.Symbol,O=Y,q=Object.prototype,Z=q.hasOwnProperty,$=q.toString,E=O?O.toStringTag:void 0;function ee(i){var r=Z.call(i,E),t=i[E];try{i[E]=void 0;var n=!0}catch(a){}var e=$.call(i);return n&&(r?i[E]=t:delete i[E]),e}var te=Object.prototype,ie=te.toString;function ne(i){return ie.call(i)}var re="[object Null]",ae="[object Undefined]",V=O?O.toStringTag:void 0;function oe(i){return i==null?i===void 0?ae:re:V&&V in Object(i)?ee(i):ne(i)}function le(i){return i!=null&&typeof i=="object"}var de="[object Symbol]";function se(i){return typeof i=="symbol"||le(i)&&oe(i)==de}var F=0/0,ue=/^[-+]0x[0-9a-f]+$/i,ce=/^0b[01]+$/i,fe=/^0o[0-7]+$/i,me=parseInt;function U(i){if(typeof i=="number")return i;if(se(i))return F;if(C(i)){var r=typeof i.valueOf=="function"?i.valueOf():i;i=C(r)?r+"":r}if(typeof i!="string")return i===0?i:+i;i=Q(i);var t=ce.test(i);return t||fe.test(i)?me(i.slice(2),t?2:8):ue.test(i)?F:+i}var ge="Expected a function",pe=Math.max,he=Math.min;function ve(i,r,t){var n,e,a,l,d,f,m=0,s=!1,u=!1,o=!0;if(typeof i!="function")throw new TypeError(ge);r=U(r)||0,C(t)&&(s=!!t.leading,u="maxWait"in t,a=u?pe(U(t.maxWait)||0,r):a,o="trailing"in t?!!t.trailing:o);function g(v){var T=n,_=e;return n=e=void 0,m=v,l=i.apply(_,T),l}function k(v){return m=v,d=setTimeout(p,r),s?g(v):l}function x(v){var T=v-f,_=v-m,R=r-T;return u?he(R,a-_):R}function c(v){var T=v-f,_=v-m;return f===void 0||T>=r||T<0||u&&_>=a}function p(){var v=A();if(c(v))return h(v);d=setTimeout(p,x(v))}function h(v){return d=void 0,o&&n?g(v):(n=e=void 0,l)}function y(){d!==void 0&&clearTimeout(d),m=0,n=f=e=d=void 0}function S(){return d===void 0?l:h(A())}function j(){var v=A(),T=c(v);if(n=arguments,e=this,f=v,T){if(d===void 0)return k(f);if(u)return clearTimeout(d),d=setTimeout(p,r),g(f)}return d===void 0&&(d=setTimeout(p,r)),l}return j.cancel=y,j.flush=S,j}var we="Expected a function";function ye(i,r,t){var n=!0,e=!0;if(typeof i!="function")throw new TypeError(we);return C(t)&&(n="leading"in t?!!t.leading:n,e="trailing"in t?!!t.trailing:e),ve(i,r,{leading:n,maxWait:r,trailing:e})}function P(i){return new Promise(function(r,t){var n=document.createElement("script");n.onload=r,n.onerror=t,n.src=i,document.head.appendChild(n)})}function ke(i){return new Promise(function(r,t){var n=document.createElement("link");n.href=i,n.type="text/css",n.rel="stylesheet",n.onload=r,n.onerror=t,document.head.appendChild(n)})}function be(){w.module("Fields",[]).directive("fieldMedia",["mediaPicker","mediaInfo",function(i,r){var t={};function n(e){var a=this;a.selectMedia=function(){i.select().then(function(l){e.media=l.url,e.height=l.height,e.width=l.width,e.title||(e.title=String(l.title).replace(/([-_])/g," ").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(d){return d.toUpperCase()}))})},a.selectPoster=function(){i.select().then(function(l){e.options||(e.options={}),e.options.poster=l.url})},a.isVideo=function(l){return!!(l&&(l.match(/\.(mp4|ogv|webm)$/)||l.match(/(\/\/.*?)vimeo\.[a-z]+\/(?:\w*\/)*(\d+)/i)||l.match(/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)(.*)/i)||l.match(/(\/\/.*?youtu\.be)\/([^?]+)(.*)/i)))},e.$watch("media",function(l){if(l===void 0&&(e.media=""),(!e.options||w.isArray(e.options))&&(e.options={}),t[e.media]){e.options.width=t[e.media].width,e.options.height=t[e.media].height;return}r(e.media,!0).then(function(d){e.height="",e.width="",Object.keys(t).length>0&&e.options.iframe&&!t[e.media]&&(e.options.iframe.width="",e.options.iframe.height=""),d.type&&(e.options.width=d.width,e.options.height=d.height,e.options.type=d.type,t[e.media]=d)})},!0),e.$watch("options.iframe",function(){e.options.iframe&&(e.options.width=e.options.iframe.width,e.options.height=e.options.iframe.height)},!0)}return{scope:{media:"=",options:"=?",title:"=?"},restrict:"E",controller:["$scope",n],controllerAs:"vm",template:`<div>
                                <div class="uk-grid-small" uk-grid>
                                    <div class="uk-width-expand">
                                        <div class="uk-position-relative">
                                            <span class="uk-form-icon" uk-icon="image"></span><input class="uk-input" ng-model="media">
                                        </div>
                                    </div>
                                    <div class="uk-width-auto">
                                        <button class="uk-button uk-button-default" ng-click="vm.selectMedia()">Select</button>
                                    </div>
                                </div>
                                <div class="uk-grid uk-margin-top">
                                    <div class="uk-width-1-2@s">
                                        <div class="uk-inline-clip">
                                            <media-preview src="{{ media }}"></media-preview>
                                            <div class="uk-grid uk-grid-small uk-child-width-auto uk-margin-top" ng-show="options.type === 'iframe'">
                                                <div><input class="uk-input uk-form-width-medium" type="text" ng-model="options.iframe.width" placeholder="Width"></div>
                                                <div><input class="uk-input uk-form-width-medium" type="text" ng-model="options.iframe.height" placeholder="Height"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-width-1-2@s" ng-show="vm.isVideo(media)">
                                        <div class="uk-margin-bottom" ng-show="options.poster"><media-preview src="{{ options.poster }}"></media-preview></div>
                                        <a class="uk-button uk-button-default uk-margin-small-right" ng-click="vm.selectPoster()">Select Poster</button>
                                        <a class="uk-button uk-button-text" ng-show="options.poster" ng-click="(options.poster = '')">Reset</a>
                                    </div>
                                </div>
                            </div>`}}]).directive("fieldHtmleditor",["$timeout",function(i){var r;function t(){if(!r){var n=window.widgetkit.config;r=P(n.assetsBase+"/lib/codemirror/codemirror.js")}return r}return{restrict:"EA",require:"?ngModel",link:function(e,a,l,d){t().then(function(){var f=document.createElement("textarea");a.after(f).hide(),i(function(){setTimeout(function(){var m=CodeMirror.fromTextArea(f,I({autoCloseBrackets:!0,autoCloseTags:!0,autofocus:!1,dragDrop:!1,indentUnit:4,indentWithTabs:!1,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,matchTags:!0,tabSize:4,viewportMargin:2,smartIndent:!1},e.$eval(l.options)));m.on("change",ye(function(){d.$setViewValue(m.getValue()),e.$root.$$phase||e.$apply()},50)),d.$render=function(){m.setValue(d.$viewValue||""),m.refresh()},d.$render()})})})}}}]).directive("fieldLocation",[function(){var i;function r(){if(!i){var t=window.widgetkit.config.googlemapseapikey;i=Promise.all([ke("https://cdn.jsdelivr.net/npm/leaflet@1.9.2/dist/leaflet.css"),P("https://cdn.jsdelivr.net/npm/leaflet@1.9.2/dist/leaflet.js"),t?P("https://maps.googleapis.com/maps/api/js?libraries=places&key="+t):null])}return i}return{restrict:"EA",require:"?ngModel",replace:!0,template:`<div>
                                <div class="uk-grid-small uk-child-width-1-2" uk-grid>
                                    <div>
                                        <input class="uk-input" type="text" placeholder="{{ lat.toFixed(4) + ',' + lng.toFixed(4) }}">
                                    </div>
                                    <div>
                                        <input class="uk-input" type="text" placeholder="Custom marker: URL or #000" ng-model="marker">
                                    </div>
                                </div>
                                <div class="uk-margin js-map" style="min-height: 300px; z-index: 0">Loading map\u2026</div>
                           </div>`,link:function(n,e,a,l){r().then(function(){var d=e[0],f=window,m=f.L,s=f.google,u=m.map(d.querySelector(".js-map")),o=new m.marker(["53.5503","10.0006"],{draggable:!0});m.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'}).addTo(u),u.addLayer(o),o.on("dragend",function(){var c=o.getLatLng(),p=c.lat,h=c.lng;x(p,h)}),u.on("click",function(c){var p=c.latlng,h=p.lat,y=p.lng;return x(h,y)});var g=d.querySelector("input");g.addEventListener("input",function(c){var p=c.target.value;if(xe(p)){var h=p.split(",").map(function(j){return j.trim()}),y=h[0],S=h[1];x(y,S)}});var k;s&&(k=new s.maps.places.SearchBox(g),k.addListener("places_changed",function(){var c,p=k.getPlaces(),h=p[0];if(h!=null&&(c=h.geometry)!=null&&c.location){var y=h.geometry.location,S=y.lat,j=y.lng;x(S(),j())}})),n.$watchGroup(["lat","lng","marker"],function(c){var p=c[0],h=c[1],y=c[2];l.$setViewValue({lat:p,lng:h,marker:y}),g.value="",u.setView([p,h],13),o.setLatLng([p,h]).update()},!0),l.$render=function(){var c=l.$viewValue||{lat:53.5503,lng:10.0006,marker:""},p=c.lat,h=c.lng,y=c.marker;n.lat=p,n.lng=h,n.marker=y},l.$render(),n.$apply(),e.on("$destroy",function(){var c;u.off(),(c=k)==null||c.unbindAll()});function x(c,p){n.lat=parseFloat(c),n.lng=parseFloat(p),n.$apply()}})}}}]).directive("fieldPathpicker",["mediaPicker",function(i){function r(t){var n=this;n.selectPath=function(){i.select({allowedFiletypes:/\.*$/i}).then(function(e){t.path=e.url})},t.$watch("path",function(e){t.path=e},!0)}return{scope:{path:"="},restrict:"E",controller:["$scope",r],controllerAs:"vm",template:`<div>
                                  <div class="uk-flex">
                                      <div class="uk-inline uk-flex-1 uk-margin-small-right">
                                        <span class="uk-form-icon" uk-icon="link"></span><input class="uk-input" ng-model="path">
                                      </div>
                                      <button class="uk-button uk-button-default" ng-click="vm.selectPath()">Select</button>
                                  </div>
                               </div>`}}]).directive("fieldDate",[function(){return{restrict:"E",require:"?ngModel",scope:{date:"@"},template:`<div class="uk-inline uk-width-1-1">
                                  <input class="uk-input" type="datetime-local" ng-model="date">
                               </div>`,link:function(r,t,n,e){r.$watch("date",function(a){return e.$setViewValue(a)}),e.$render=function(){r.date=new Date(e.$viewValue)},e.$render()}}}]).factory("Fields",function(){var i={text:{label:"Text",template:function(t,n){var e=w.element('<input class="uk-input" type="text"  ng-model="'+t+'">').attr(n.attributes||{});return n&&n.icon&&(e=e.wrap('<div class="uk-inline uk-width-1-1"></div>').before('<span class="uk-form-icon" uk-icon="'+n.icon+'"></span>').parent()),e}},textarea:{label:"Textarea",template:function(t,n){return w.element('<textarea id="wk-content" class="uk-textarea" ng-model="'+t+'" rows="10"></textarea>').attr(n.attributes||{})}},editor:{label:"Editor",template:function(t){var n=window.tinyMCE&&window.WK_SYSTEM_EDITOR?"wysiwygeditor":"htmleditor";return w.element("<field-"+n+' ng-model="'+t+'" rows="10"></field-'+n+">")}},htmleditor:{label:"HTML Editor",template:function(t){var n="htmleditor";return w.element("<field-"+n+' ng-model="'+t+'" rows="10"></field-'+n+">")}},tags:{label:"Tags",template:function(t,n){return w.element('<div class="uk-inline uk-width-1-1"><span class="uk-form-icon" uk-icon="tag"></span><input class="uk-input" type="text" ng-list ng-model="'+t+'" placeholder="tag, tag, ..."></div><div>').find("input").attr(n.attributes||{}).parent()}},boolean:{label:"Boolean",template:function(t,n){return w.element('<input class="uk-checkbox" type="checkbox" ng-model="'+t+'">').attr(n.attributes||{})}},media:{label:"Media",template:function(t){return'<field-media media="'+t+'"></field-media>'}},pathpicker:{label:"Pathpicker",template:function(t){return'<field-pathpicker path="'+t+'"></field-pathpicker>'}},location:{label:"Location",template:function(t){return'<field-location  ng-model="'+t+'"></field-location>'}},date:{label:"Date",template:function(t){return'<field-date ng-model="'+t+'"></field-date>'}}};return{register:function(t,n){i[t]=w.extend({label:t,assets:[],template:function(){}},n)},exists:function(t){return!!i[t]},get:function(t){return i[t]},fields:function(){var t=[];return Object.keys(i).forEach(function(n){t.push({name:n,label:i[n].label})}),t}}}).directive("field",["$timeout","$compile","Fields",function(i,r,t){return{require:"?ngModel",restrict:"E",link:function(e,a,l){var d=function(){var m=w.extend({},JSON.parse(l.options||"{}")),s=l.type||"text";if(t.exists(s)){var u=t.get(s),o=u.template(l.ngModel,m);o.then?o.then(function(g){r(a.html(g).contents())(e)}):r(a.html(o).contents())(e)}else r(a.html(t.get("text").template(l.ngModel)).contents())(e)};i(d)}}}])}function xe(i){return i==null?void 0:i.match(/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/)}var L=function(r){b.extend(this,{tag:"",attrs:{},type:"single",content:""},r)};b.extend(L,{parse:function(r,t){var n=this.regexp(r).exec(t),e={tag:r},a;return n&&(n[4]?a="self-closing":n[6]?a="closed":a="single",e={tag:n[2],attrs:this.attrs(n[3]),type:a,content:n[5]}),new L(e)},attrs:function(r){var t=/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*'([^']*)'(?:\s|$)|(\w+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g,n={},e;for(r=r.replace(/[\u00a0\u200b]/g," ");e=t.exec(r);)e[1]?n[e[1].toLowerCase()]=e[2]:e[3]?n[e[3].toLowerCase()]=e[4]:e[5]&&(e[6]==="true"||e[6]==="1")?n[e[5].toLowerCase()]=!0:e[5]&&(e[6]==="false"||e[6]==="0")?n[e[5].toLowerCase()]=!1:e[5]?n[e[5].toLowerCase()]=e[6]:e[7]?n[e[7]]=!0:e[8]&&(n[e[8]]=!0);return n},regexp:function(r){return new RegExp("\\[(\\[?)("+r+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}}),b.extend(L.prototype,{string:function(){var r="["+this.tag;return b.each(this.attrs,function(t,n){typeof n=="boolean"?r+=" "+t+"="+(n?1:0):n!==""&&(r+=" "+t+'="'+n+'"')}),this.type==="single"?r+"]":this.type==="self-closing"?r+" /]":(r+="]",this.content&&(r+=this.content),r+"[/"+this.tag+"]")}}),w.module("widgetkit",["Application","ngResource","ngTouch","Fields"]).value("name","widgetkit").value("UIkit",window.UIkit).factory("Content",["$resource","Application",function(i,r){return i(r.url("/content/:id"),{},{query:{method:"GET",responseType:"json"},save:{method:"POST",responseType:"json"}})}]).filter("supported",["Application",function(i){return function(r,t){return t?r.filter(function(n){var e=i.config.types[n.type],a=t.item.filter(function(l){if(e.item.indexOf(l)!==-1)return!0}).length;return a===t.item.length}):r}}]).filter("ucwords",["Application",function(){return function(i){return i.replace(/([-_])/g," ").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(r){return r.toUpperCase()})}}]).service("mediaInfo",["Application","$q",function(i,r){return function(t,n){t=t||"";var e={url:t,type:"",src:t&&!t.match(/^(https?:)?\//)?i.baseUrl()+"/"+t:t,provider:null,image:i.config.images.placeholder,width:null,height:null},a,l;if(t.match(/\.(jpe?g|png|gif|svg)$/i)?(e.type="image",e.image=e.src):t.match(/\.(mp3|ogg|wav)$/)?(e.type="audio",e.image=i.config.images.audio):t.match(/\.(mp4|ogv|webm)$/)?(e.type="video",e.image=i.config.images.video):(a=/(\/\/.*?)vimeo\.[a-z]+\/(?:\w*\/)*(\d+)/i.exec(t))?(e.provider="vimeo",e.type="iframe",e.src="//player.vimeo.com/video/"+a[2],e.image=i.config.images.iframe):((a=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)(.*)/i.exec(t))||(a=/(\/\/.*?youtu\.be)\/([^?]+)(.*)/i.exec(t)))&&(e.provider="youtube",e.type="iframe",e.src="//www.youtube.com/embed/"+a[2]+a[3].replace(/^&/,"?"),e.image="//img.youtube.com/vi/"+a[2]+"/hqdefault.jpg"),n)switch(l=r.defer(),e.type){case"image":{var d=new Image;d.onerror=function(){l.resolve(e)},d.onload=function(){e.width=d.width,e.height=d.height,l.resolve(e)},d.src=e.src;break}case"video":{var f=w.element('<video style="position:fixed;visibility:hidden;top:-10000px;"></video>').attr("src",e.src).appendTo("body"),m=setInterval(function(){f[0].videoWidth&&(clearInterval(m),e.width=f[0].videoWidth,e.height=f[0].videoHeight,f.remove(),l.resolve(e))},20);break}case"iframe":e.provider==="vimeo"&&b.ajax({type:"GET",url:"//vimeo.com/api/oembed.json?url="+encodeURI(e.url),jsonp:"callback",dataType:"jsonp",success:function(u){e.width=u.width,e.height=u.height,l.resolve(e)}}).fail(function(){l.resolve(e)}),e.provider==="youtube"&&b.ajax({type:"GET",url:"//query.yahooapis.com/v1/public/yql",data:{q:"select * from json where url ='http://www.youtube.com/oembed?url="+encodeURI(e.url)+"'",format:"json"},dataType:"jsonp",success:function(u){if(u&&u.query&&u.query.results&&u.query.results.json){var o=b(u.query.results.json.html);e.width=o.attr("width"),e.height=o.attr("height")}l.resolve(e)}}).fail(function(){l.resolve(e)});break;default:l.resolve(e)}return n?l.promise:e}}]).factory("httpInterceptor",["$q","$rootElement","UIkit",function(i,r,t){return{responseError:function(e){var a;return e.data&&e.data.message?a=e.data.message:a=e.statusText,t.notification({message:a,status:"danger",container:r}),i.reject(e)}}}]).config(["$httpProvider","$sceProvider",function(i,r){i.interceptors.push("httpInterceptor"),r.enabled(!1)}]),M(),z(),be(),b(function(){b.extend(window.widgetkit,{shortcode:L})})})(jQuery,angular);
